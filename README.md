# Telegram Style Transfer Bot

üéì **–ò—Ç–æ–≥–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç 1 –∫—É—Ä—Å–∞ (–≤–µ—Å–Ω–∞ 2025) Deep Learning School –ú–§–¢–ò**

* [Deep Learning School](https://dls.samcs.ru)
* [Course page on stepic.org](https://stepik.org/course/230362/info)

Telegram-–±–æ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Å–µ—Ä–≤–∏—Å —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π: –æ–Ω –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–≤–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–µ –∏ —Å—Ç–∏–ª—å ‚Äî –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å –ø—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã–º —Å—Ç–∏–ª–µ–º.

---


## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

* ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **polling** –∏ **webhook** —Ä–µ–∂–∏–º–æ–≤
* ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–∞ –≤ **Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ**
* ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã —Å **ngrok**, **DevTunnels** –∏–ª–∏ **—Ä–µ–≤–µ—Ä—Å-–ø—Ä–æ–∫—Å–∏(nginx)**
* ‚úÖ –ë–µ–∑ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏ –≤–Ω–µ—à–Ω–∏–º —Å–µ—Ä–≤–∏—Å–∞–º
* ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `.env` —Ñ–∞–π–ª–∞ –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
* ‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

* **–Ø–∑—ã–∫**: Python
* **–§—Ä–µ–π–º–≤–æ—Ä–∫**: [aiogram](https://github.com/aiogram/aiogram)
* **HTTP-—Å–µ—Ä–≤–µ—Ä**: aiohttp
* **–°–±–æ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**: GitHub Actions + GHCR



## –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### –ê–ª–≥–æ—Ä–∏—Ç–º –ì–∞—Ç–∏—Å–∞(Neural Style Transfer)

* **–°—Å—ã–ª–∫–∞ –Ω–∞ —Å—Ç–∞—Ç—å—é –≤ arxiv.org:** [A Neural Algorithm of Artistic Style](https://arxiv.org/abs/1508.06576)
* **–°—Ç–∞—Ç—å—è —Å–æ —Å–∫–≤–æ–∑–Ω—ã–º –ø—Ä–∏–º–µ—Ä–æ–º –∏ –Ω–æ—É—Ç–±—É–∫–æ–º**: [Neural Transfer Using PyTorch](https://docs.pytorch.org/tutorials/advanced/neural_style_tutorial.html)

### –ö–∞–∫–æ–π-—Ç–æ –¥—Ä—É–≥–æ–π –∞–ª–≥–æ—Ä–∏—Ç–º –∏–ª–∏ –ø–æ–¥—Ö–æ–¥(–¥.–±. –ì–ê–ù—ã)




## –ó–∞–ø—É—Å–∫

–ë–æ—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω –≤ Docker. –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ `.env`, –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ä–µ–∂–∏–º–µ polling –∏–ª–∏ webhook.

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é:

```bash
docker build -t tg-style-bot .
docker run --env-file .env -p 8443:8443 tg-style-bot
```

## Webhook —Ä–µ–∂–∏–º

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Ä–∞–±–æ—Ç–∞:

* —á–µ—Ä–µ–∑ **ngrok**
* —á–µ—Ä–µ–∑ **DevTunnels**
* —á–µ—Ä–µ–∑ **—Ä–µ–≤–µ—Ä—Å-–ø—Ä–æ–∫—Å–∏** (–Ω–∞–ø—Ä–∏–º–µ—Ä, nginx)

> ‚ö†Ô∏è –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ä–µ–≤–µ—Ä—Å-–ø—Ä–æ–∫—Å–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–±—Ä–æ—Å–∏—Ç—å `WEBHOOK_PATH` –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö nginx.
> üìÑ –¢–∞–∫–∂–µ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –ø–µ—Ä–µ–¥–∞—Ç—å –ø—É—Ç—å –∫ `.pem`-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—É —á–µ—Ä–µ–∑ `WEBHOOK_CERT_PATH` –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ webhook'–∞.

## üìÅ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ `.env` —Ñ–∞–π–ª. –ü—Ä–∏–º–µ—Ä ‚Äî –≤ [.env.example](./.env.example).

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –≤–∞–∂–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

* `TELEGRAM_BOT_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
* `BOT_RUN_MODE` ‚Äî —Ä–µ–∂–∏–º –∑–∞–ø—É—Å–∫–∞ (`polling` –∏–ª–∏ `webhook`)
* `WEBHOOK_URL`, `WEBHOOK_PORT`, `WEBHOOK_PATH`, `WEBHOOK_SECRET`
* `WEBHOOK_CERT_PATH` ‚Äî –Ω—É–∂–µ–Ω –ø—Ä–∏ –ø—Ä—è–º–æ–º –¥–æ—Å—Ç—É–ø–µ –∫ Telegram API –±–µ–∑ –ø—Ä–æ–∫—Å–∏

## CI/CD

* –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **GitHub Actions**
* –û–±—Ä–∞–∑ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∏ –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è –≤ **GHCR**
* –õ–æ–∫–∞–ª—å–Ω—ã–µ —Ü–µ–ª–∏ (lint, format) ‚Äî —á–µ—Ä–µ–∑ `Makefile`

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

* –ü—Ä–æ–µ–∫—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å—Ç–∞–¥–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.
* –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª (—Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π) –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–∑–∂–µ.
* –ü–æ–∫–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –≤–Ω–µ—à–Ω–∏—Ö API.

---


–ü—Ä–∏–º–µ—Ä:

```markdown
![GitHub Actions](https://github.com/username/repo/actions/workflows/deploy.yml/badge.svg)
![Docker Image Size](https://img.shields.io/docker/image-size/username/image/latest)
```

